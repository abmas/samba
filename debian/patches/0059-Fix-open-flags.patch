From: Ashok Ramakrishnan <ashok.ramakrishnan@simplivity.com>
Date: Fri, 21 Jul 2017 13:17:53 -0400
Subject: Fix open flags.

---
 source3/smbd/smbXsrv_open.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/source3/smbd/smbXsrv_open.c b/source3/smbd/smbXsrv_open.c
index 7b00f39..043d27a 100644
--- a/source3/smbd/smbXsrv_open.c
+++ b/source3/smbd/smbXsrv_open.c
@@ -322,7 +322,7 @@ nextIndex:
 static bool file_copy (const char * source, const char * dest)
 {
 	int in_fd = open(source, O_RDONLY);
-	int out_fd = open(dest, O_WRONLY|O_CREAT);
+	int out_fd = open(dest, O_WRONLY|O_CREAT|O_TRUNC, 0600);
 	char buf[8192];
 	if ( in_fd < 0 || out_fd < 0) goto fail;
 
