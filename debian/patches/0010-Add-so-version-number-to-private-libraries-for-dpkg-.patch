From: Jeroen Dekkers <jeroen@dekkers.ch>
Date: Mon, 29 Feb 2016 12:04:33 -0500
Subject: Add so version number to private libraries for dpkg-shlibdeps

We also want dpkg-shlibdeps to generate correct dependency information
for the private libraries in our binary packages, but dpkg-shlibdeps
only works when the library has a version number.
---
 buildtools/wafsamba/wafsamba.py | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/buildtools/wafsamba/wafsamba.py b/buildtools/wafsamba/wafsamba.py
index 4a47dbf..4a502f2 100644
--- a/buildtools/wafsamba/wafsamba.py
+++ b/buildtools/wafsamba/wafsamba.py
@@ -232,6 +232,9 @@ def SAMBA_LIBRARY(bld, libname, source,
             raise Utils.WafError("public library '%s' must have header files" %
                        libname)
 
+    if private_library and not vnum:
+        vnum = '0'
+
     if bundled_name is not None:
         pass
     elif target_type == 'PYTHON' or realname or not private_library:
