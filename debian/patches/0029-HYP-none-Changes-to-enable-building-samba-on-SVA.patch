From: Ashok Ramakrishnan <ashok.ramakrishnan@simplivity.com>
Date: Tue, 16 Aug 2016 13:33:25 +0000
Subject: HYP-none : Changes to enable building samba on SVA.

---
 source3/lib/netapi/netapi.c | 8 ++++++++
 source3/lib/util.c          | 8 ++++++++
 2 files changed, 16 insertions(+)

diff --git a/source3/lib/netapi/netapi.c b/source3/lib/netapi/netapi.c
index fd06279..b73a371 100644
--- a/source3/lib/netapi/netapi.c
+++ b/source3/lib/netapi/netapi.c
@@ -26,6 +26,14 @@
 struct libnetapi_ctx *stat_ctx = NULL;
 static bool libnetapi_initialized = false;
 
+/**
+* Destroy global objects allocated by init_iconv()
+ **/
+void gfree_charcnv(void)
+{
+	TALLOC_FREE(global_iconv_handle);
+}
+
 /****************************************************************
 ****************************************************************/
 
diff --git a/source3/lib/util.c b/source3/lib/util.c
index 2895c14..0e6e503 100644
--- a/source3/lib/util.c
+++ b/source3/lib/util.c
@@ -91,6 +91,14 @@ void gfree_all( void )
 	gfree_debugsyms();
 }
 
+/**
+ * Destroy global objects allocated by init_iconv()
+ **/
+void gfree_charcnv(void)
+{
+	TALLOC_FREE(global_iconv_handle);
+}
+
 /*******************************************************************
  Check if a file exists - call vfs_file_exist for samba files.
 ********************************************************************/
