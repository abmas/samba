From: Kevin Pease <kevin.pease@simplivity.com>
Date: Mon, 7 Mar 2016 10:28:27 -0500
Subject: Fake support for FSCTL_SET_INTEGRITY_INFORMATION.

---
 source3/smbd/smb2_ioctl_filesys.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/source3/smbd/smb2_ioctl_filesys.c b/source3/smbd/smb2_ioctl_filesys.c
index 6e4a785..47a9b9c 100644
--- a/source3/smbd/smb2_ioctl_filesys.c
+++ b/source3/smbd/smb2_ioctl_filesys.c
@@ -473,6 +473,11 @@ struct tevent_req *smb2_ioctl_filesys(uint32_t ctl_code,
 		}
 		return tevent_req_post(req, ev);
 		break;
+        case FSCTL_SET_INTEGRITY_INFORMATION:
+                /* Ashok: Cheat and return success */
+                tevent_req_done(req);
+                return tevent_req_post(req, ev);
+                break;
 	default: {
 		uint8_t *out_data = NULL;
 		uint32_t out_data_len = 0;
