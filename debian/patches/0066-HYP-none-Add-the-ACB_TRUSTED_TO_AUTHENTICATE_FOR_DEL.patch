From: Ashok Ramakrishnan <ashok.ramakrishnan@simplivity.com>
Date: Fri, 10 Nov 2017 11:30:41 -0500
Subject: HYP-none: Add the ACB_TRUSTED_TO_AUTHENTICATE_FOR_DELEGATION flag.

---
 source3/libnet/libnet_join.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/source3/libnet/libnet_join.c b/source3/libnet/libnet_join.c
index a28864d..5104929 100644
--- a/source3/libnet/libnet_join.c
+++ b/source3/libnet/libnet_join.c
@@ -1394,10 +1394,9 @@ static NTSTATUS libnet_join_joindomain_rpc(TALLOC_CTX *mem_ctx,
 		status = result;
 		goto done;
 	}
-
 	/* Fill in the additional account flags now */
 
-	acct_flags |= ACB_PWNOEXP;
+	acct_flags |= ACB_PWNOEXP|ACB_TRUSTED_TO_AUTHENTICATE_FOR_DELEGATION;
 
 	/* Set account flags on machine account */
 	ZERO_STRUCT(user_info.info16);
@@ -1431,7 +1430,6 @@ static NTSTATUS libnet_join_joindomain_rpc(TALLOC_CTX *mem_ctx,
 			nt_errstr(status));
 		goto done;
 	}
-
 	/* Set password on machine account - first try level 26 */
 
 	/*
